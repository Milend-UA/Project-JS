<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>User Details</title>
    <style>
        .user-details {
            border: 1px solid #000;
            padding: 10px;
            width: 90%;
            margin: 10px auto;
        }
        .posts-container {
            display: flex;
            flex-wrap: wrap;
        }
        .post-block {
            border: 1px solid #000;
            padding: 10px;
            margin: 10px;
            width: 18%;
        }
    </style>
</head>
<body>
<div id="user-details" class="user-details"></div>
<button id="load-posts">Post of Current User</button>
<div id="posts-container" class="posts-container"></div>

<script>
    // Получаем ID пользователя из URL
    const urlParams = new URLSearchParams(window.location.search);
    const userId = urlParams.get('userId');

    // 4. Выводим всю информацию о пользователе
    fetch(`https://jsonplaceholder.typicode.com/users/${userId}`)
        .then(response => response.json())
        .then(user => {
            const userDetails = document.getElementById('user-details');
            userDetails.innerHTML = `
                    <p>ID: ${user.id}</p>
                    <p>Name: ${user.name}</p>
                    <p>Username: ${user.username}</p>
                    <p>Email: ${user.email}</p>
                    <p>Address: ${user.address.street}, ${user.address.city}</p>
                    <p>Phone: ${user.phone}</p>
                    <p>Website: ${user.website}</p>
                    <p>Company: ${user.company.name}</p>
                `;
        });

    // 5. Добавляем кнопку для загрузки постов пользователя
    document.getElementById('load-posts').addEventListener('click', () => {
        fetch(`https://jsonplaceholder.typicode.com/users/${userId}/posts`)
            .then(response => response.json())
            .then(posts => {
                const postsContainer = document.getElementById('posts-container');
                postsContainer.innerHTML = ''; // Очищаем контейнер перед добавлением новых постов

                posts.forEach(post => {
                    const postBlock = document.createElement('div');
                    postBlock.className = 'post-block';
                    postBlock.innerHTML = `<p>Title: ${post.title}</p>`;

                    // 6. Добавляем кнопку/ссылку для перехода на страницу post-details.html
                    const postLink = document.createElement('a');
                    postLink.href = `post-details.html?postId=${post.id}`;
                    postLink.textContent = 'View Post Details';
                    postBlock.appendChild(postLink);

                    postsContainer.appendChild(postBlock);
                });
            });
    });
</script>
</body>
</html>
